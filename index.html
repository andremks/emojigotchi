<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Emojigotchi - Vers√£o Web (Emoji)</title>
 <style>
   #sleep-label,body,html{font-family:sans-serif}#pet,#speech-bubble{box-sizing:border-box}#panel-toggle:hover,#status-popup{background:rgba(0,0,0,.9)}#debug-panel,#pet-menu,#sleep-label,#speech-bubble,#status-popup{display:none;position:fixed}#debug-panel,#panel-toggle,#pet,#pet-menu,#sleep-label,#speech-bubble,#status-popup,.platform{position:fixed}body,html{margin:0;padding:0;height:100%;overflow:hidden;background:#202020}#pet{width:24px;height:24px;background:0 0;bottom:0;left:0;cursor:default;transform:translate(0,0);display:flex;justify-content:center;align-items:center;font-size:18px;line-height:1;text-align:center;user-select:none;z-index:1000}#sleep-label{top:0;left:0;transform:translateX(-50%);pointer-events:none;color:#fff;font-size:12px;text-shadow:0 0 4px #000;animation:1s infinite blink}@keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}#pet-menu{background:#333;color:#fff;border-radius:4px;padding:4px;font-size:12px;z-index:1500;box-shadow:0 2px 6px rgba(0,0,0,.5);min-width:140px}#pet-menu button{display:block;width:100%;background:0 0;border:none;color:#fff;padding:4px 8px;text-align:left;cursor:pointer;font-size:12px}#pet-menu button:hover{background:#555}#speech-bubble{max-width:160px;background:#fff;color:#000;font-size:11px;padding:4px 6px;border-radius:6px;box-shadow:0 2px 4px rgba(0,0,0,.4);z-index:1400;transform:translate(-50%,-100%);pointer-events:none;white-space:normal;word-wrap:break-word}#speech-bubble::after{content:"";position:absolute;left:50%;transform:translateX(-50%);bottom:-5px;border-width:5px;border-style:solid;border-color:#fff transparent transparent}#panel-toggle{top:8px;right:8px;width:32px;height:32px;border-radius:999px;border:none;background:rgba(0,0,0,.7);color:#fff;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;z-index:1600;box-shadow:0 2px 4px rgba(0,0,0,.6)}#debug-panel,#status-popup,.actions-row button{color:#fff;font-size:11px}#status-popup{top:48px;right:8px;border-radius:8px;padding:8px 10px;min-width:190px;z-index:1550;box-shadow:0 3px 8px rgba(0,0,0,.8)}#status-popup .status-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;font-weight:700;font-size:12px}#status-popup .status-header span{white-space:nowrap}.status-line{display:flex;align-items:center;gap:4px;margin-bottom:3px}.status-name{min-width:58px}.status-bar{flex:1;height:4px;background:rgba(255,255,255,.18);border-radius:4px;overflow:hidden}.status-bar-fill{height:100%;width:0%;background:#4caf50;transition:width .15s linear}#bar-happiness{background:#ffc107}#bar-boredom{background:#2196f3}.actions-row{display:flex;justify-content:space-between;gap:4px;margin-top:6px}.actions-row button{flex:1;border-radius:6px;border:none;background:rgba(255,255,255,.12);cursor:pointer;padding:4px 0;display:flex;align-items:center;justify-content:center;gap:4px;white-space:nowrap}.actions-row button:hover{background:rgba(255,255,255,.24)}#debug-panel{top:8px;right:48px;background:rgba(0,0,0,.85);padding:8px;border-radius:6px;z-index:2000;min-width:190px;box-shadow:0 2px 6px rgba(0,0,0,.7)}#debug-panel h4{margin:0 0 4px;font-size:12px}#debug-panel label{display:block;margin:2px 0}#debug-panel input[type=range]{width:100%}#debug-panel button{margin:2px 2px 0 0;font-size:10px;padding:2px 4px;cursor:pointer}#debug-panel .debug-row{margin-bottom:4px}.platform{height:6px;background:#0f0;border-radius:3px;box-shadow:0 0 6px rgba(0,0,0,.6);z-index:500}
 </style>
</head>
<body>

  <div id="pet"></div>

  <div id="sleep-label">...zZz</div>

  <!-- Menu de contexto (bot√£o direito no pet) -->
  <div id="pet-menu">
    <button data-action="feed">üçñ Alimentar</button>
    <button data-action="play">üéÆ Brincar</button>
    <button data-action="medicine">üíä Dar rem√©dio</button>
    <button data-action="wake">üîî Acordar</button>
    <button data-action="toggle-active">‚èØÔ∏è Ativo/Passivo</button>
  </div>

  <!-- Bal√£o de fala -->
  <div id="speech-bubble"></div>

  <!-- Bot√£o que abre o pop-up -->
  <button id="panel-toggle" title="Status do pet">üêæ</button>

  <!-- Pop-up de status + a√ß√µes -->
  <div id="status-popup">
    <div class="status-header">
      <span>Lv <span id="status-level">1</span></span>
      <span id="status-xp">0 / 100 XP</span>
    </div>
    <div class="status-line">
      <span class="status-name">Energia</span>
      <div class="status-bar">
        <div id="bar-energy" class="status-bar-fill"></div>
      </div>
    </div>
    <div class="status-line">
      <span class="status-name">Felicidade</span>
      <div class="status-bar">
        <div id="bar-happiness" class="status-bar-fill"></div>
      </div>
    </div>
    <div class="status-line">
      <span class="status-name">T√©dio</span>
      <div class="status-bar">
        <div id="bar-boredom" class="status-bar-fill"></div>
      </div>
    </div>

    <div class="actions-row">
      <button data-action="feed"><span>üçñ</span><span>Alimentar</span></button>
      <button data-action="play"><span>üéÆ</span><span>Brincar</span></button>
      <button data-action="medicine"><span>üíä</span><span>Rem√©dio</span></button>
    </div>
  </div>

  <!-- Painel de Debug (ativado com ?dev=1 na URL) -->
  <div id="debug-panel">
    <h4>Debug Pet</h4>
    <div class="debug-row">
      <label>Energia
        <input id="debug-energy" type="range" min="0" max="100" value="80">
      </label>
      <label>Felicidade
        <input id="debug-happiness" type="range" min="0" max="100" value="60">
      </label>
      <label>T√©dio
        <input id="debug-boredom" type="range" min="0" max="100" value="20">
      </label>
    </div>
    <div class="debug-row">
      <button data-debug="sleep">Dormir</button>
      <button data-debug="wake">Acordar</button>
    </div>
    <div class="debug-row">
      <button data-debug="run">For√ßar correr</button>
      <button data-debug="stop">Parar</button>
      <button data-debug="play">Play mode</button>
    </div>
    <div class="debug-row">
      <label>
        <input type="checkbox" id="debug-pause">
        Pausar loop
      </label>
    </div>
  </div>

  <script>
    const PET_SIZE=24,pet=document.getElementById("pet"),sleepLabel=document.getElementById("sleep-label"),petMenu=document.getElementById("pet-menu"),speechBubble=document.getElementById("speech-bubble"),panelToggle=document.getElementById("panel-toggle"),statusPopup=document.getElementById("status-popup"),statusLevel=document.getElementById("status-level"),statusXp=document.getElementById("status-xp"),barEnergy=document.getElementById("bar-energy"),barHappiness=document.getElementById("bar-happiness"),barBoredom=document.getElementById("bar-boredom"),debugPanelEl=document.getElementById("debug-panel"),DEV_MODE="1"===new URLSearchParams(window.location.search).get("dev"),SLEEP_DELAY=12e4,PERSONALITY="random",EMOJIS={sleep:"\uD83D\uDE34",stop:"\uD83D\uDE42",walk:"\uD83D\uDE01",run:"\uD83D\uDE06",bored:"\uD83D\uDE21",play:"\uD83D\uDE00",curious:"\uD83E\uDD28"};let posX=0,velX=3,running=!0,currentState="walk",stateTimer=0,lastTime=null,isSleeping=!1,lastInteractionTime=performance.now(),energy=80,happiness=60,boredom=20,level=1,xp=0;const XP_PER_LEVEL=100;let isActive=!0,visualOffsetX=0,visualOffsetY=0,jumpActive=!1,jumpElapsed=0,jumpDuration=500,jumpAmplitude=10,shakeActive=!1,shakeElapsed=0,shakeDuration=300,shakeAmplitude=2,scaleX=1,scaleY=1,mouseX=null,mouseY=null,lastMouseMoveTime=0,dragging=!1,dragOffsetX=0,playMode=!1,playModeTimer=0,distanceWalked=0;const missions=[{id:1,target:500,done:!1},{id:2,target:2e3,done:!1},{id:3,target:1e4,done:!1}],achievements=[{id:"marathonista",label:"Maratonista",unlocked:!1,check:()=>distanceWalked>=1e4}];let platformMode=!1,platforms=[],currentPlatformIndex=0,platformStayTimer=0;const phrases={click:["Ei!","Opa!","Que foi?","Oi humano!","Hehe!"],sleep:["T\xf4 com sono...","Fui dormir...","Boa noite..."],wake:["Acordei!","J\xe1 t\xf4 de p\xe9!","Voltei!"],feed:["Hmmm, valeu!","Que del\xedcia!","Tava com fome!"],play:["Uhuu, brincar!","Bora brincar!","Adoro isso!"],modeActive:["Modo ativo ON!","T\xf4 ligado!","Bora se mexer!"],modePassive:["Modo relax...","Vou ficar mais quieto.","Ok, devagar agora."],bored:["T\xf4 entediado...","Brinca comigo?","Que t\xe9dio..."],mission:["uHuuuuUUU!","Tamo ai na atividade!","T\xf4 upandi, vc viu?"],random:["S\xf3 passando pra lembrar que existo.","Oi, ainda a\xed?","Me d\xe1 aten\xe7\xe3o \uD83D\uDE1C"],levelUp:["Subi de n\xedvel!","Sou outro pet agora!","Mais forte ainda!"],achievement:["Conquista desbloqueada!","Olha eu ficando PRO!","T\xf4 colecionando trof\xe9us!"],medicine:["T\xf4 me sentindo melhor!","Essa foi amarga, mas ajudou.","Acho que estou curado \uD83D\uDE0C"]},phraseIndexByCategory={};let speechTimeoutId=null,lastBoredomSpeech=0;const BOREDOM_SPEECH_INTERVAL=15e3;let lastRandomEventTime=performance.now(),nextRandomEventDelay=3e4;function clamp(e,t,a){return Math.max(t,Math.min(a,e))}function nextPhrase(e){let t=phrases[e];if(!t||0===t.length)return null;let a=phraseIndexByCategory[e]??-1,n=(a+1)%t.length;return phraseIndexByCategory[e]=n,t[n]}function say(e,t=2e3){if(!e)return;let a=pet.getBoundingClientRect(),n=a.left+a.width/2,o=a.top-8;speechBubble.textContent=e,speechBubble.style.left=n+"px",speechBubble.style.top=o+"px",speechBubble.style.display="block",speechTimeoutId&&clearTimeout(speechTimeoutId),speechTimeoutId=setTimeout(()=>{speechBubble.style.display="none"},t)}function sayFromCategory(e,t=2e3){let a=nextPhrase(e);say(a,t)}function updateStatusPanel(){barEnergy&&(barEnergy.style.width=energy+"%",barHappiness.style.width=happiness+"%",barBoredom.style.width=boredom+"%",statusLevel.textContent=level,statusXp.textContent=`${xp} / 100 XP`)}function addXp(e){if(!(e<=0)){for(xp+=e,console.log(`XP +${e} (total: ${xp})`);xp>=100;)xp-=100,level++,console.log(`‚≠ê Level up! Novo n\xedvel: ${level}`),sayFromCategory("levelUp",2500);updateStatusPanel()}}function checkAchievements(){achievements.forEach(e=>{!e.unlocked&&e.check()&&(e.unlocked=!0,console.log(`üèÜ Conquista desbloqueada: ${e.label}`),sayFromCategory("achievement",2500),addXp(30))})}const movementStatesBase=[{name:"stop",minDuration:800,maxDuration:2e3,speed:0},{name:"walk",minDuration:2e3,maxDuration:5e3,speed:1},{name:"run",minDuration:800,maxDuration:2e3,speed:2.5}];function getMovementStatesForPersonality(){let e=JSON.parse(JSON.stringify(movementStatesBase));return"agitated"===PERSONALITY?(e.find(e=>"run"===e.name).speed=3.5,e.find(e=>"stop"===e.name).maxDuration=1200):"lazy"===PERSONALITY&&(e.find(e=>"run"===e.name).speed=2,e.find(e=>"stop"===e.name).maxDuration=3e3),e}let movementStates=getMovementStatesForPersonality();function getDayPeriod(){let e=new Date().getHours();return e<6?"dawn":e<12?"morning":e<18?"afternoon":"night"}function getCurrentSleepDelay(){let e=getDayPeriod();return"night"===e?6e4:"morning"===e?144e3:12e4}function initPosition(){posX=window.innerWidth/2-12,pet.style.bottom="0px",updatePetStyle(),updateEmoji(),movementStates=getMovementStatesForPersonality(),chooseNewState(),lastInteractionTime=performance.now(),lastRandomEventTime=performance.now(),nextRandomEventDelay=randomRange(2e4,45e3),updateStatusPanel(),console.log("Per\xedodo do dia:",getDayPeriod())}function updatePetStyle(){pet.style.left=posX+"px",pet.style.transform=`translate(${visualOffsetX}px, ${visualOffsetY}px) scale(${scaleX}, ${scaleY})`,isSleeping&&updateSleepLabelPosition()}function updateSleepLabelPosition(){let e=pet.getBoundingClientRect();sleepLabel.style.left=e.left+e.width/2+"px",sleepLabel.style.top=e.top-16+"px"}function randomRange(e,t){return e+Math.random()*(t-e)}function chooseNewState(){movementStates=getMovementStatesForPersonality();let e={stop:1,walk:1,run:1};energy<30&&(e.run*=.3,e.stop+=2),energy<10&&(e.run=0,e.walk*=.3,e.stop+=3),boredom>60&&(e.run+=2,e.walk+=1),happiness>70&&(e.walk+=1,e.run+=1),happiness<30&&(e.stop+=1);let t=getDayPeriod();if("morning"===t?(e.run+=1,e.walk+=.5):"night"===t?(e.stop+=2,e.run*=.5):"dawn"===t&&(e.stop+=1),"agitated"===PERSONALITY)e.run*=1.8,e.stop*=.5;else if("lazy"===PERSONALITY)e.stop*=2,e.run*=.5;else if("random"===PERSONALITY){let a=Math.random();a<.33?e.run+=1:a<.66&&(e.stop+=1)}for(let n in e)e[n]=Math.max(0,e[n]);let o=e.stop+e.walk+e.run,s=Math.random()*o,l="stop";l=s<e.stop?"stop":s<e.stop+e.walk?"walk":"run";let i=movementStates.find(e=>e.name===l)||movementStates[0];currentState=i.name,stateTimer=randomRange(i.minDuration,i.maxDuration);let r=Math.sign(velX);0===r&&(r=.5>Math.random()?-1:1),velX=r*i.speed}function updatePosition(){let e=window.innerWidth;(posX+=velX)<0?(posX=0,velX=Math.abs(velX)):posX+24>e&&(posX=e-24,velX=-Math.abs(velX)),updatePetStyle()}function updateEmoji(){if(isSleeping){pet.textContent=EMOJIS.sleep;return}if(boredom>70){pet.textContent=EMOJIS.bored;return}if(playMode||platformMode||jumpActive||shakeActive){pet.textContent=EMOJIS.play;return}"stop"===currentState?pet.textContent=EMOJIS.stop:"walk"===currentState?pet.textContent=EMOJIS.walk:"run"===currentState?pet.textContent=EMOJIS.run:pet.textContent=EMOJIS.stop}function enterSleep(){isSleeping||(isSleeping=!0,sleepLabel.style.display="block",velX=0,jumpActive=!1,shakeActive=!1,visualOffsetX=0,visualOffsetY=0,scaleX=1,scaleY=1,updatePetStyle(),updateEmoji(),currentState="stop",sayFromCategory("sleep",2500))}function exitSleep(){isSleeping&&(isSleeping=!1,sleepLabel.style.display="none",lastInteractionTime=performance.now(),chooseNewState(),updateEmoji(),sayFromCategory("wake",2e3))}function startJump(){jumpActive=!0,jumpElapsed=0,jumpDuration=randomRange(450,700),jumpAmplitude=randomRange(16,28)}function updateJump(e){if(jumpActive){if("run"!==currentState&&!platformMode){jumpActive=!1,visualOffsetY=0,scaleX=1,scaleY=1;return}if((jumpElapsed+=e)>=jumpDuration)jumpActive=!1,visualOffsetY=0,scaleX=1,scaleY=1;else{let t=jumpElapsed/jumpDuration,a=Math.sin(Math.PI*t)*jumpAmplitude;visualOffsetY=-a;let n=Math.sin(Math.PI*t);scaleX=1-.15*n,scaleY=1+.15*n}}}function startShake(){shakeActive=!0,shakeElapsed=0,shakeDuration=randomRange(200,450),shakeAmplitude=randomRange(1,3)}function updateShake(e){if(shakeActive){if("stop"!==currentState&&!platformMode){shakeActive=!1,visualOffsetX=0;return}if((shakeElapsed+=e)>=shakeDuration)shakeActive=!1,visualOffsetX=0;else{let t=shakeElapsed/shakeDuration,a=Math.sin(t*Math.PI*10)*shakeAmplitude;visualOffsetX=a}}}function applyCuriosity(){if(!isActive||platformMode||null===mouseX||null===mouseY)return;let e=performance.now();if(e-lastMouseMoveTime>5e3)return;let t=pet.getBoundingClientRect(),a=t.left+t.width/2,n=t.top+t.height/2,o=mouseX-a,s=mouseY-n;if(128>=Math.abs(o)&&128>=Math.abs(s)){let l=1.2+happiness/100*1.5;velX=(o>0?1:-1)*l}}function updateMissionsAndPlay(e){let t=Math.abs(velX)*(e/16);if(distanceWalked+=t,missions.forEach(e=>{!e.done&&distanceWalked>=e.target&&(e.done=!0,console.log(`üéØ Miss\xe3o ${e.id} conclu\xedda! Dist\xe2ncia alvo: ${e.target}px`),sayFromCategory("mission",2500),addXp(20))}),checkAchievements(),playMode&&!platformMode){if((playModeTimer-=e)<=0)playMode=!1,console.log("\uD83C\uDFAE Modo brincar terminou!");else if("run"!==currentState&&.02>Math.random()){currentState="run";let a=movementStates.find(e=>"run"===e.name);if(a){let n=Math.sign(velX)||(.5>Math.random()?-1:1);velX=n*(a.speed+1)}}}}function tryRandomEvent(e){isActive&&!platformMode&&!isSleeping&&!dragging&&!playMode&&!(e-lastInteractionTime<8e3)&&(e-lastRandomEventTime<nextRandomEventDelay||(lastRandomEventTime=e,nextRandomEventDelay=randomRange(2e4,45e3),triggerRandomEvent()))}function triggerRandomEvent(){let e=Math.random();e<.25?startPlatformMode():e<.55?(startShake(),sayFromCategory("random",2500)):e<.85?(startJump(),sayFromCategory("random",2500)):sayFromCategory("bored",2500)}function createPlatforms(){clearPlatforms(),platforms=[];let e=window.innerWidth;for(let t=0;t<5;t++){let a=e/6,n=a*(t+1)-30,o=t%2==0?20:80,s=40+o,l={x:n,yBottom:s,width:60,el:null};platforms.push(l)}platforms.forEach((e,t)=>{let a=document.createElement("div");a.className="platform",a.dataset.index=t,a.style.left=e.x+"px",a.style.width=e.width+"px",a.style.bottom=e.yBottom+"px",document.body.appendChild(a),e.el=a})}function clearPlatforms(){platforms.forEach(e=>{e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el)}),platforms=[]}function movePetToPlatform(e){e&&(posX=e.x+e.width/2-12,pet.style.left=posX+"px",pet.style.bottom=e.yBottom+6+"px",visualOffsetX=0,visualOffsetY=0,scaleX=1,scaleY=1,updateEmoji())}function startPlatformMode(){if(!platformMode&&!isSleeping&&!dragging){if(platformMode=!0,playMode=!1,createPlatforms(),0===platforms.length){platformMode=!1;return}currentPlatformIndex=0,movePetToPlatform(platforms[0]),platformStayTimer=2e3,say("Hora do parkour! \uD83C\uDFD7Ô∏è",2200),console.log("\uD83C\uDFD7Ô∏è Modo plataformas iniciado!")}}function updatePlatformMode(e){if(!platformMode)return;if(0===platforms.length){endPlatformMode();return}let t=performance.now()/400;if(visualOffsetY=3*Math.sin(t),updatePetStyle(),(platformStayTimer-=e)<=0){if(++currentPlatformIndex>=platforms.length){endPlatformMode();return}let a=platforms[currentPlatformIndex];animateJumpToPlatform(a),platformStayTimer=2e3}}function animateJumpToPlatform(e){if(!platformMode||!e)return;let t=posX,a=e.x+e.width/2-12,n=parseFloat(pet.style.bottom)||0,o=e.yBottom+6,s=performance.now();function l(i){if(!platformMode)return;let r=Math.min((i-s)/550,1);posX=t+(a-t)*(r*r*(3-2*r)),pet.style.left=posX+"px",pet.style.bottom=n+(o-n)*r+30*Math.sin(r*Math.PI)+"px",visualOffsetX=0,visualOffsetY=0,scaleX=1,scaleY=1,r<1&&platformMode?requestAnimationFrame(l):platformMode&&movePetToPlatform(e)}requestAnimationFrame(l)}function endPlatformMode(){platformMode=!1,clearPlatforms(),pet.style.bottom="0px",visualOffsetX=0,visualOffsetY=0,scaleX=1,scaleY=1,updatePetStyle(),chooseNewState(),say("Ufa! Que treino! \uD83D\uDCAA",2200),addXp(15),console.log("\uD83C\uDFC1 Modo plataformas finalizado.")}function loop(e){if(!running)return;null===lastTime&&(lastTime=e);let t=e-lastTime;lastTime=e;let a=t/1e3;if(isSleeping||(!platformMode&&Math.abs(velX)>0?(energy-=4*a,boredom-=3*a):platformMode||(boredom+=2*a),happiness-=.5*a,energy=clamp(energy,0,100),happiness=clamp(happiness,0,100),boredom=clamp(boredom,0,100)),!isSleeping&&boredom>70&&!platformMode){let n=performance.now();n-lastBoredomSpeech>15e3&&(lastBoredomSpeech=n,sayFromCategory("bored",2500))}if(platformMode||tryRandomEvent(e),!isSleeping&&e-lastInteractionTime>=getCurrentSleepDelay()&&!platformMode&&enterSleep(),isSleeping){energy=clamp(energy+6*a,0,100),boredom=clamp(boredom-2*a,0,100),happiness=clamp(happiness+1*a,0,100),visualOffsetX=0,visualOffsetY=-(2*Math.sin(e/600)),scaleX=1,scaleY=1,updatePetStyle(),updateEmoji(),updateStatusPanel(),requestAnimationFrame(loop);return}if(dragging){updatePetStyle(),updateEmoji(),updateStatusPanel(),requestAnimationFrame(loop);return}if(platformMode){updatePlatformMode(t),updateEmoji(),updateStatusPanel(),requestAnimationFrame(loop);return}if((stateTimer-=t)<=0&&chooseNewState(),isActive&&"run"===currentState&&!jumpActive){let o=.01*(t/16);happiness>70&&(o*=1.5),Math.random()<o&&startJump()}if(isActive&&"stop"===currentState&&!shakeActive){let s=.01*(t/16);happiness>70&&(s*=1.5),Math.random()<s&&startShake()}applyCuriosity(),isActive||(velX*=.9),visualOffsetX=shakeActive?visualOffsetX:0,jumpActive||(visualOffsetY=0,scaleX=1,scaleY=1),jumpActive?updateJump(t):shakeActive&&updateShake(t),updateMissionsAndPlay(t),Math.abs(velX)>.001?updatePosition():updatePetStyle(),updateEmoji(),updateStatusPanel(),requestAnimationFrame(loop)}function registerInteraction(){lastInteractionTime=performance.now(),isSleeping&&exitSleep(),happiness=clamp(happiness+5,0,100),boredom=clamp(boredom-5,0,100),addXp(1)}function doPetAction(e){"feed"===e?(energy=clamp(energy+30,0,100),happiness=clamp(happiness+15,0,100),boredom=clamp(boredom-10,0,100),console.log("\uD83C\uDF56 Pet alimentado! Energia:",energy.toFixed(0)),addXp(8),sayFromCategory("feed",2e3)):"play"===e?startPlatformMode():"medicine"===e?(energy=clamp(energy+20,0,100),happiness=clamp(happiness+8,0,100),boredom=clamp(boredom-5,0,100),console.log("\uD83D\uDC8A Rem\xe9dio dado! Energia:",energy.toFixed(0)),addXp(6),sayFromCategory("medicine",2200)):"wake"===e?exitSleep():"toggle-active"===e&&(isActive=!isActive,console.log("Modo",isActive?"Ativo":"Passivo"),sayFromCategory(isActive?"modeActive":"modePassive",2200)),updateStatusPanel()}function setupDebugPanel(){if(!DEV_MODE||!debugPanelEl)return;debugPanelEl.style.display="block";let e=document.getElementById("debug-energy"),t=document.getElementById("debug-happiness"),a=document.getElementById("debug-boredom"),n=document.getElementById("debug-pause");e&&(e.value=energy,e.addEventListener("input",e=>{energy=clamp(energy=Number(e.target.value),0,100),updateStatusPanel()})),t&&(t.value=happiness,t.addEventListener("input",e=>{happiness=clamp(happiness=Number(e.target.value),0,100),updateStatusPanel()})),a&&(a.value=boredom,a.addEventListener("input",e=>{boredom=clamp(boredom=Number(e.target.value),0,100),updateStatusPanel()})),n&&n.addEventListener("change",e=>{e.target.checked?running=!1:running||(running=!0,lastTime=null,requestAnimationFrame(loop))}),debugPanelEl.addEventListener("click",e=>{let t=e.target.closest("button[data-debug]");if(!t)return;let a=t.dataset.debug;if("sleep"===a)enterSleep();else if("wake"===a)exitSleep();else if("run"===a){currentState="run";let n=movementStates.find(e=>"run"===e.name);if(n){let o=Math.sign(velX)||(.5>Math.random()?-1:1);velX=o*(n.speed+1)}}else"stop"===a?(currentState="stop",velX=0):"play"===a&&startPlatformMode();updateStatusPanel()})}pet.addEventListener("mouseenter",()=>{registerInteraction()}),pet.addEventListener("mousemove",()=>{registerInteraction()}),pet.addEventListener("click",()=>{if(!dragging&&(registerInteraction(),sayFromCategory("click",1500),!isSleeping&&isActive&&!platformMode)){if("run"!==currentState&&.5>Math.random()){currentState="run";let e=movementStates.find(e=>"run"===e.name);if(e){let t=Math.sign(velX)||(.5>Math.random()?-1:1);velX=t*(e.speed+.5)}}else startShake()}}),pet.addEventListener("mousedown",e=>{if(0!==e.button)return;dragging=!0,velX=0;let t=pet.getBoundingClientRect();dragOffsetX=e.clientX-t.left,registerInteraction(),e.preventDefault()}),window.addEventListener("mousemove",e=>{if(mouseX=e.clientX,mouseY=e.clientY,lastMouseMoveTime=performance.now(),dragging){posX=e.clientX-dragOffsetX;let t=window.innerWidth;posX<0&&(posX=0),posX+24>t&&(posX=t-24),updatePetStyle()}}),window.addEventListener("mouseup",()=>{dragging&&(dragging=!1,chooseNewState())}),pet.addEventListener("contextmenu",e=>{e.preventDefault(),petMenu.style.left=e.clientX+"px",petMenu.style.top=e.clientY+"px",petMenu.style.display="block"}),petMenu.addEventListener("click",e=>{let t=e.target.closest("button");if(!t)return;let a=t.dataset.action;registerInteraction(),doPetAction(a),petMenu.style.display="none"}),panelToggle.addEventListener("click",e=>{e.stopPropagation();let t="block"===statusPopup.style.display;statusPopup.style.display=t?"none":"block"}),statusPopup.addEventListener("click",e=>{let t=e.target.closest("button[data-action]");if(!t)return;let a=t.dataset.action;registerInteraction(),doPetAction(a),e.stopPropagation()}),window.addEventListener("click",e=>{petMenu.contains(e.target)||e.target===pet||(petMenu.style.display="none"),e.target===panelToggle||statusPopup.contains(e.target)||(statusPopup.style.display="none")}),window.addEventListener("resize",()=>{let e=window.innerWidth;posX+24>e&&(posX=Math.max(0,e-24),updatePetStyle())}),initPosition(),setupDebugPanel(),requestAnimationFrame(loop);
  </script>
</body>
</html>

